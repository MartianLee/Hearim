%h1 Listing letters

%table
  %thead
    %tr
      %th Body
      %th 상세보기
      %th User
      %th Edit
      %th Like
      %th Save
      %th Liked
      %th Saved
      %th Destroy

  %tbody
    - @letters.each do |letter|
      %tr
        %td= letter.body
        %td= link_to 'Show', letter
        %td= current_user.email
        %td= link_to 'Edit', edit_letter_path(letter) if can? :edit, letter
        %td= link_to 'Like', likes_path(letter: letter), method: :post
        %td= link_to 'Save', saved_letters_path(letter: letter), method: :post
        %td= letter.likes.pluck(:user_id).include?(current_user.id)
        %td= current_user.saved_letters.pluck(:letter_id).include?(letter.id)
        %td= link_to 'Destroy', letter, method: :delete, data: { confirm: 'Are you sure?' } if can? :edit, letter

%br

= link_to 'New Letter', new_letter_path
= link_to 'Home', root_path
